swagger: "2.0"
info:
  description: "自然语言处理，处理自然语言识别，关键词提取，智能分词，情感分析等功能。"
  version: "1.0.0"
  title: "自然语言处理"

basePath: "/ecloud/ai/v1"
tags:
- name: "nlp"
  description: "自然语言处理"

schemes:
- "https"
paths:
  /nlp/v1/keyword:
    post:
      tags:
      - "nlp"
      summary: "关键词提取"
      description: "关键词提取"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "关键词提取请求体"
        required: true
        schema:
          type: "object"
          properties:
            items:
              type: "array"
              description: "待分析的文本数组"
              items:
                type: "object"
                properties:
                  textId: 
                    type: "string"
                    description: "文本序列id，数组内唯一"
                  text:
                    type: "string"
                    description: "待分析的文本，最大长度400"
      responses:
        "405":
          description: "Invalid input"
        "200":
          description: "关键词提取成功"  
          schema:
            $ref: "#/definitions/KeywordResponse"
  /nlp/v1/segmentation:
    post:
      tags:
      - "nlp"
      summary: "智能分词"
      description: "智能分词"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "智能分词请求体"
        required: true
        schema:
          type: "object"
          properties:
            items:
              type: "array"
              description: "待分析的文本数组"
              items:
                type: "object"
                properties:
                  textId: 
                    type: "string"
                    description: "文本序列id，数组内唯一"
                  text:
                    type: "string"
                    description: "待分析的文本，最大长度400"
      responses:
        "405":
          description: "Invalid input"
        "200":
          description: "智能分词成功"  
          schema:
            $ref: "#/definitions/SegmentationResponse"
  /nlp/v1/sentiment/convertdoc:
    post:
      tags:
      - "nlp"
      summary: "智能分词"
      description: "智能分词"
      consumes:
      - "multipart/form-data"
      produces:
      - "application/json"
      parameters:
      - name: "file"
        in: "formData"
        description: "file to upload"
        required: false
        type: "file"
      responses:
        "405":
          description: "Invalid input"
        "200":
          description: "智能分词成功"  
          schema:
            $ref: "#/definitions/ConvertDocResponse"
  /nlp/v1/sentiment/wb:
    post:
      tags:
      - "nlp"
      summary: "情感分析（微博文本，新闻文本）"
      description: "情感分析（微博文本，新闻文本）"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "情感分析请求体"
        required: true
        schema:
          type: "object"
          properties:
            items:
              type: "array"
              description: "待分析的文本数组"
              items:
                type: "object"
                properties:
                  textId: 
                    type: "string"
                    description: "文本序列id，数组内唯一"
                  text:
                    type: "string"
                    description: "待分析的文本，最长不超过4096"
                  contentType:
                    type: "string"
                    description: "枚举类型，weibo/news, 默认为weibo"
                  title:
                    type: "string"
                    description: "新闻的标题，如果contentType为news则必选"
      responses:
        "405":
          description: "Invalid input"
        "200":
          description: "情感分析成功"  
          schema:
            $ref: "#/definitions/WbResponse"
  /nlp/v1/industry:
    post:
      tags:
      - "nlp"
      summary: "行业分类识别"
      description: "行业分类识别"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "行业分类识别请求体"
        required: true
        schema:
          type: "object"
          properties:
            items:
              type: "array"
              description: "待分析的文本数组"
              items:
                type: "object"
                properties:
                  textId: 
                    type: "string"
                    description: "文本序列标识"
                  content:
                    type: "string"
                    description: "待分析的文本，最长不超过4096，内容不为空"
                  title:
                    type: "string"
                    description: "待分析的文本标题，目前仅支持UTF-8编码，长度不超过1024"
      responses:
        "405":
          description: "Invalid input"
        "200":
          description: "行业分类识别成功"  
          schema:
            $ref: "#/definitions/IndustryResponse"
  /nlp/v1/entity:
    post:
      tags:
      - "nlp"
      summary: "行业分类识别"
      description: "行业分类识别"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "命名实体识别请求体"
        required: true
        schema:
          type: "object"
          properties:
            items:
              type: "array"
              description: "待分析的文本数组"
              items:
                type: "object"
                properties:
                  textId: 
                    type: "string"
                    description: "文本序列标识"
                  text:
                    type: "string"
                    description: "待分析的文本，最长不超过200，内容不为空"
      responses:
        "405":
          description: "Invalid input"
        "200":
          description: "命名实体识别成功"  
          schema:
            $ref: "#/definitions/EntityResponse"
  /nlp/v1/emotion:
    post:
      tags:
      - "nlp"
      summary: "对话情绪识别"
      description: "对话情绪识别"
      consumes:
      - "application/json"
      produces:
      - "application/json"
      parameters:
      - in: "body"
        name: "body"
        description: "对话情绪识别请求体"
        required: true
        schema:
          type: "object"
          properties:
            items:
              type: "array"
              description: "待分析的文本数组"
              items:
                type: "object"
                properties:
                  textId: 
                    type: "string"
                    description: "文本序列标识"
                  text:
                    type: "string"
                    description: "待分析的文本，最长不超过4096，内容不为空"
      responses:
        "405":
          description: "Invalid input"
        "200":
          description: "命名实体识别成功"  
          schema:
            $ref: "#/definitions/EmotionResponse"
definitions:
  KeywordResult:
    type: "object"
    properties:
      items:
        type: "array"
        description: "结果数组"
        items:
          type: "object"
          properties:
            textId: 
              type: "string"
              description: "文本序列标识"
            keywords:
              type: "array"
              description: "单个文本的关键词列表"
              items:
                type: "object"
                properties:
                  name:
                    type: "string"
                    description: "文本中关键词"
                  nature:
                    type: "string"
                    description: "关键词对应的词性"
                  weight:
                    type: "number"
                    description: "关键词对应的权值"
  SegmentationResult:
    type: "object"
    properties:
      items:
        type: "array"
        description: "结果数组"
        items:
          type: "object"
          properties:
            textId: 
              type: "string"
              description: "文本序列标识"
            bean:
              type: "array"
              description: "单个文本的分词结果"
              items:
                type: "object"
                properties:
                  word:
                    type: "string"
                    description: "分词后的单词"
                  nature:
                    type: "string"
                    description: "单词对应的词性"
  KeywordResponse:
    type: "object"
    properties:
      requestId: 
        type: "string"
        description: "请求标识"
      state: 
        type: "string"
        description: "请求状态"
        enum:
        - "OK"
        - "ERROR"
      body: 
        $ref: "#/definitions/KeywordResult"
  SegmentationResponse:
    type: "object"
    properties:
      requestId: 
        type: "string"
        description: "请求标识"
      state: 
        type: "string"
        description: "请求状态"
        enum:
        - "OK"
        - "ERROR"
      body: 
        $ref: "#/definitions/SegmentationResult" 
  ConvertDocResult:
    type: "object"
    properties:
      data:
        type: "array"
        description: "文本提取信息"
        items:
          type: "object"
          properties:
            contractTitle: 
              type: "string"
              description: "合同标题"
            vendeeName: 
              type: "string"
              description: "甲方名称"
            vendeeAddress: 
              type: "string"
              description: "甲方地址"
            vendeeAccountName: 
              type: "string"
              description: "甲方户名"
            vendeeBank: 
              type: "string"
              description: "甲方开户行"
            vendeeAccountNum: 
              type: "string"
              description: "甲方账户"
            vendorName: 
              type: "string"
              description: "乙方名称"
            vendorAddress: 
              type: "string"
              description: "乙方地址"     
            vendorAccountName: 
              type: "string"
              description: "乙方户名"
            vendorBank: 
              type: "string"
              description: "乙方开户行"
            vendorAccountNum: 
              type: "string"
              description: "乙方账户"
            contractStartDate: 
              type: "string"
              description: "合同开始时间"
            contractEndDate: 
              type: "string"
              description: "合同结束时间"
  ConvertDocResponse:
    type: "object"
    properties:
      requestId: 
        type: "string"
        description: "请求标识"
      state: 
        type: "string"
        description: "请求状态"
        enum:
        - "OK"
        - "ERROR"
      body: 
        $ref: "#/definitions/ConvertDocResult"  
  WbResult:
    type: "object"
    properties:
      items:
        type: "array"
        description: "结果数组"
        items:
          type: "object"
          properties:
            textId: 
              type: "string"
              description: "文本序列标识"
            label: 
              type: "string"
              description: "情感值:-1 负面:0 中性；1正面"
            prob: 
              type: "array"
              description: "情感的概率值，分别是负面，中性，正面"
              items:
                type: "number"
  WbResponse:
    type: "object"
    properties:
      requestId: 
        type: "string"
        description: "请求标识"
      state: 
        type: "string"
        description: "请求状态"
        enum:
        - "OK"
        - "ERROR"
      body: 
        $ref: "#/definitions/WbResult" 
  IndustryResult:
    type: "object"
    properties:
      items:
        type: "array"
        description: "结果数组"
        items:
          type: "object"
          properties:
            textId: 
              type: "string"
              description: "文本序列标识"
            industries: 
              type: "array"
              description: "行业分类"
              items:
                type: "object"
                properties:
                  labelName: 
                    type: "string"
                    description: "行业分类名称"
                  label: 
                    type: "string"
                    description: "行业分类标签"
                  prob: 
                    type: "number"
                    description: "行业类型的概率值(0-1之)"
            subIndustries:
              type: "array"
              description: "二级行业标签"
              items:
                type: "string"
            events:
              type: "array"
              description: "三级行业标签"
              items:
                type: "string"
  IndustryResponse:
    type: "object"
    properties:
      requestId: 
        type: "string"
        description: "请求标识"
      state: 
        type: "string"
        description: "请求状态"
        enum:
        - "OK"
        - "ERROR"
      body: 
        $ref: "#/definitions/IndustryResult"
  EntityResult:
    type: "object"
    properties:
      items:
        type: "array"
        description: "结果数组"
        items:
          type: "object"
          properties:
            textId: 
              type: "string"
              description: "文本序列标识"
            nerTokens: 
              type: "array"
              description: "命名分析结果集"
              items:
                type: "object"
                properties:
                  beginOffset:
                    type: "integer"
                    description: "文本位置索引"
                  type:
                    type: "string"
                    description: "实体类型，PER：人名；LOC：地名；ORG：机构名"
                  word:
                    type: "string"
                    description: "实体词"
                  length:
                    type: "integer"
                    description: "实体词的词长"
  EntityResponse:
    type: "object"
    properties:
      requestId: 
        type: "string"
        description: "请求标识"
      state: 
        type: "string"
        description: "请求状态"
        enum:
        - "OK"
        - "ERROR"
      body: 
        $ref: "#/definitions/EntityResult" 
  EmotionResult:
    type: "object"
    properties:
      items:
        type: "array"
        description: "结果数组"
        items:
          type: "object"
          properties:
            textId: 
              type: "string"
              description: "文本序列标识"
            label: 
              type: "integer"
              description: "文本的情感标签，感谢（0），愉快（1），中性情绪（2），负面情绪：抱怨（3），愤怒（4）"
            prob:
              type: "array"
              description: "上述每种情绪的概率值"
              items:
                type: "number"
  EmotionResponse:
    type: "object"
    properties:
      requestId: 
        type: "string"
        description: "请求标识"
      state: 
        type: "string"
        description: "请求状态"
        enum:
        - "OK"
        - "ERROR"
      body: 
        $ref: "#/definitions/EmotionResult"   